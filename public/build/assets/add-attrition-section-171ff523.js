import{r as n,h as T,l as P,b as w,j as e,c as v}from"./app-62b5ebaa.js";import{s as D}from"./user-service-2369ceab.js";import{P as F}from"./PlusSquareTwoTone-ca84596d.js";import{M}from"./index-055ee658.js";import{e as U}from"./presets-463863c6.js";import{A as z}from"./AntdIcon-d5231a29.js";var B={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};const H=B;var I=function(l,r){return n.createElement(z,U({},l,{ref:r,icon:H}))},L=n.forwardRef(I);const $=L;async function q(){return(await T.get("/api/employee_attrition")).data}async function G(o){return(await axios.post("/api/attrition",o)).data}function J(){return async function(o,l){const r=(await q()).data;console.log("result",r),o(P.actions.setEmployeeAttritions(r))}}function V(o){return async function(l,r){(await G(o)).data}}function W(){var u,p,x,b,m,h,g,f,y,j;const[o,l]=n.useState(!1),[r,k]=n.useState("");w(t=>t.employees);const[S,R]=n.useState([]),[s,_]=n.useState({});w(t=>t.app);const[A,d]=n.useState(!1),[a,i]=n.useState({reason:"",resignationReasonSelect:"",dismissalReasonSelect:""}),N=t=>{const{value:c}=t.target;i({...a,reason:c,resignationReasonSelect:"",dismissalReasonSelect:""})};async function O(t){t.preventDefault();const c=await D({search:r});R(c.data)}async function C(t){d(!0);try{await v.dispatch(V({...s,...a})),await v.dispatch(J()),d(!1),l(!1)}catch{d(!1)}}const E=S.filter(t=>t.employee!==null&&t.employee!==0);return console.log("employeesasda",s),e.jsxs("div",{className:"my-2",children:[e.jsx("div",{class:"inline-flex rounded-md bg-white shadow-2xl",role:"group",children:e.jsxs("button",{type:"button",onClick:()=>l(!0),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-500 bg-transparent border border-blue-500 rounded-lg hover:bg-blue-500 hover:text-white focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-500 focus:text-white      gap-1",children:[e.jsx(F,{className:"text-xl"}),"Select Employee"]})}),e.jsxs(M,{title:"Select Employee Attrition",centered:!0,open:o,onOk:()=>C(),onCancel:()=>l(!1),width:1e3,okText:"Submit",confirmLoading:A,cancelText:"Cancel",children:[e.jsxs("form",{onSubmit:O,class:"flex items-center w-full mx-auto",children:[e.jsx("label",{for:"simple-search",class:"sr-only",children:"Search"}),e.jsxs("div",{class:"relative w-full",children:[e.jsx("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx($,{})}),e.jsx("input",{onChange:t=>k(t.target.value),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5",placeholder:"Search branch name..."})]}),e.jsxs("button",{type:"submit",class:"p-2.5 ms-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 ",children:[e.jsx("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),e.jsx("span",{class:"sr-only",children:"Search"})]})]}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-100 my-3",children:E.map(t=>e.jsxs("li",{className:"flex items-center justify-between gap-x-6 bg-blue-200 rounded-lg px-3",children:[e.jsx("div",{className:"min-w-0 my-3",children:e.jsxs("div",{className:"flex items-start gap-x-3 font-bold",children:[t.fname," ",t.lname]})}),e.jsx("div",{className:"flex flex-none items-center gap-x-4",children:e.jsxs("a",{onClick:()=>_(t),href:t.href,className:"hidden rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:block",children:["Choose",e.jsxs("span",{className:"sr-only",children:[", ",t.name]})]})})]},t.id))}),e.jsx("form",{class:"w-full h-full",children:e.jsxs("div",{class:"flex flex-col -mx-3 mb-6",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Employee No."}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",value:s.app_id,placeholder:"",readOnly:!0})]}),e.jsxs("div",{className:"flex flex-1 ",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"job Position"}),e.jsx("input",{value:(u=s==null?void 0:s.employee)==null?void 0:u.position,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Department"}),e.jsx("input",{value:(p=s==null?void 0:s.employee)==null?void 0:p.dept,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsxs("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:["Account ",e.jsx("i",{children:"(If Applicable)"})]}),e.jsx("input",{value:((x=s==null?void 0:s.employee)==null?void 0:x.account)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Supervisor"}),e.jsx("input",{value:(((m=(b=s==null?void 0:s.employee)==null?void 0:b.user)==null?void 0:m.employee_fname)??"")+" "+(((g=(h=s==null?void 0:s.employee)==null?void 0:h.user)==null?void 0:g.employee_lname)??""),class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"EOGS Email"}),e.jsx("input",{value:((f=s==null?void 0:s.employee)==null?void 0:f.eogs)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"email",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Hired Date"}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",value:((y=s==null?void 0:s.employee)==null?void 0:y.hired)??"",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Status"}),e.jsx("input",{value:((j=s==null?void 0:s.employee)==null?void 0:j.status)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Separation Date"}),e.jsx("input",{onChange:t=>i({...a,[t.target.name]:t.target.value}),name:"separation",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"date",placeholder:""})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Reason for Separation"}),e.jsxs("select",{onChange:N,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",name:"reason",id:"",children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Resignation"}),e.jsx("option",{children:"Dismissal"}),e.jsx("option",{children:"Terminated"}),e.jsx("option",{children:"End of Contract"}),e.jsx("option",{children:"End of Probationary Employment"}),e.jsx("option",{children:"AWOL"})]})]})]}),a.reason==="Resignation"&&e.jsxs("div",{className:"w-full px-3",id:"resignationReason",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"resignationReasonSelect",children:"Reason for Resignation:"}),e.jsxs("select",{name:"resignationReasonSelect",id:"resignationReasonSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:t=>i({...a,resignationReasonSelect:t.target.value}),children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Shift Career Path"}),e.jsx("option",{children:"Health Reason"}),e.jsx("option",{children:"Pursue Education"}),e.jsx("option",{children:"Family Care"}),e.jsx("option",{children:"Higher Salary"}),e.jsx("option",{children:"Higher Position"}),e.jsx("option",{children:"Better Job Scope"}),e.jsx("option",{children:"Better Environment"})]})]}),a.reason==="Dismissal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full px-3",id:"dismissalReason",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"dismissalReasonSelect",children:"Reason for Dismissal:"}),e.jsxs("select",{name:"dismissalReasonSelect",id:"dismissalReasonSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:t=>i({...a,dismissalReasonSelect:t.target.value}),children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Policy Violations"}),e.jsx("option",{children:"Performance"}),e.jsx("option",{children:"Others"})]})]}),e.jsxs("div",{className:"w-full px-3",id:"TerminationReport",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"TerminationReportSelect",children:"Upload Termination Report:"}),e.jsx("input",{type:"file",name:"TerminationReportSelect[]",id:"TerminationReportSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",accept:".jpg, .jpeg, .png, .pdf",multiple:!0})]})]})]})})]})]})}const se=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{W as A,se as a,J as g};
