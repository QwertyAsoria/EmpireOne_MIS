import{h as P,l as T,r,b as w,j as e,c as v}from"./app-5903bcdc.js";import{s as D}from"./user-service-e3e2102f.js";import{M as F}from"./index-e44f7e7f.js";import{U as L}from"./UserAddOutlined-68514843.js";import{U}from"./UserDeleteOutlined-0a36bce5.js";async function H(){return(await P.get("/api/employee_attrition")).data}async function B(l){return(await axios.post("/api/attrition",l)).data}function M(){return async function(l,n){const a=(await H()).data;console.log("result",a),l(T.actions.setEmployeeAttritions(a))}}function W(l){return async function(n,a){(await B(l)).data}}function z(){var u,p,x,b,m,g,f,h,y,j;const[l,n]=r.useState(!1),[a,k]=r.useState("");w(t=>t.employees);const[S,R]=r.useState([]),[s,N]=r.useState({});w(t=>t.app);const[_,d]=r.useState(!1),[o,i]=r.useState({reason:"",resignationReasonSelect:"",dismissalReasonSelect:""}),O=t=>{const{value:c}=t.target;i({...o,reason:c,resignationReasonSelect:"",dismissalReasonSelect:""})};async function E(t){t.preventDefault();const c=await D({search:a});R(c.data)}async function A(t){d(!0);try{await v.dispatch(W({...s,...o})),await v.dispatch(M()),d(!1),n(!1)}catch{d(!1)}}const C=S.filter(t=>t.employee!==null&&t.employee!==0);return console.log("employeesasda",s),e.jsxs("div",{className:"my-2",children:[e.jsx("div",{class:"inline-flex rounded-md bg-white shadow-2xl",role:"group",children:e.jsxs("button",{type:"button",onClick:()=>n(!0),class:"inline-flex items-center px-4 py-2 text-sm font-medium text-blue-500 bg-transparent border border-blue-500 rounded-lg hover:bg-blue-500 hover:text-white focus:z-10 focus:ring-2 focus:ring-blue-500 focus:bg-blue-500 focus:text-white      gap-1",children:[e.jsx(U,{className:"text-xl"}),"Select Employee Attirition"]})}),e.jsxs(F,{title:"Select Employee Attrition",centered:!0,open:l,onOk:()=>A(),onCancel:()=>n(!1),width:1e3,okText:"Submit",confirmLoading:_,cancelText:"Cancel",children:[e.jsxs("form",{onSubmit:E,class:"flex items-center w-full mx-auto",children:[e.jsx("label",{for:"simple-search",class:"sr-only",children:"Search"}),e.jsxs("div",{class:"relative w-full",children:[e.jsx("div",{class:"absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx(L,{})}),e.jsx("input",{onChange:t=>k(t.target.value),type:"text",id:"simple-search",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full ps-10 p-2.5",placeholder:"Search employee..."})]}),e.jsxs("button",{type:"submit",class:"p-2.5 ms-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 ",children:[e.jsx("svg",{class:"w-4 h-4","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})}),e.jsx("span",{class:"sr-only",children:"Search"})]})]}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-100 my-3",children:C.map(t=>e.jsxs("li",{className:"flex items-center justify-between gap-x-6 bg-blue-200 rounded-lg px-3",children:[e.jsx("div",{className:"min-w-0 my-3",children:e.jsxs("div",{className:"flex items-start gap-x-3 font-bold",children:[t.fname," ",t.lname]})}),e.jsx("div",{className:"flex flex-none items-center gap-x-4",children:e.jsxs("a",{onClick:()=>N(t),href:t.href,className:"hidden rounded-md bg-white px-2.5 py-1.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:block",children:["Choose",e.jsxs("span",{className:"sr-only",children:[", ",t.name]})]})})]},t.id))}),e.jsx("form",{class:"w-full h-full",children:e.jsxs("div",{class:"flex flex-col -mx-3 mb-6",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Employee No."}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",value:s.app_id,placeholder:"",readOnly:!0})]}),e.jsxs("div",{className:"flex flex-1 ",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"job Position"}),e.jsx("input",{value:(u=s==null?void 0:s.employee)==null?void 0:u.position,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Department"}),e.jsx("input",{value:(p=s==null?void 0:s.employee)==null?void 0:p.dept,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsxs("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:["Account ",e.jsx("i",{children:"(If Applicable)"})]}),e.jsx("input",{value:((x=s==null?void 0:s.employee)==null?void 0:x.account)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Supervisor"}),e.jsx("input",{value:(((m=(b=s==null?void 0:s.employee)==null?void 0:b.user)==null?void 0:m.employee_fname)??"")+" "+(((f=(g=s==null?void 0:s.employee)==null?void 0:g.user)==null?void 0:f.employee_lname)??""),class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"EOGS Email"}),e.jsx("input",{value:((h=s==null?void 0:s.employee)==null?void 0:h.eogs)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"email",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Hired Date"}),e.jsx("input",{class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",value:((y=s==null?void 0:s.employee)==null?void 0:y.hired)??"",placeholder:"",readOnly:!0})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Status"}),e.jsx("input",{value:((j=s==null?void 0:s.employee)==null?void 0:j.status)??"",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"text",placeholder:"",readOnly:!0})]})]}),e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Separation Date"}),e.jsx("input",{onChange:t=>i({...o,[t.target.name]:t.target.value}),name:"separation",class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-text",type:"date",placeholder:""})]}),e.jsxs("div",{class:"w-full px-3",children:[e.jsx("label",{class:"block uppercase tracking-wide  text-xs font-bold mb-1 mt-2",children:"Reason for Separation"}),e.jsxs("select",{onChange:O,class:"appearance-none block w-full   border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",name:"reason",id:"",children:[e.jsx("option",{value:""}),e.jsx("option",{value:"Resigned",children:"Resignation"}),e.jsx("option",{value:"Dismissal",children:"Dismissal"}),e.jsx("option",{value:"Terminated",children:"Terminated"}),e.jsx("option",{value:"End of Contract",children:"End of Contract"}),e.jsx("option",{value:"EOPE",children:"EOPE (End of Probationary Employment)"}),e.jsx("option",{value:"AWOL",children:"AWOL (Absent Without Official Leave)"})]})]})]}),o.reason==="Resignation"&&e.jsxs("div",{className:"w-full px-3",id:"resignationReason",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"resignationReasonSelect",children:"Reason for Resignation:"}),e.jsxs("select",{name:"resignationReasonSelect",id:"resignationReasonSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:t=>i({...o,resignationReasonSelect:t.target.value}),children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Shift Career Path"}),e.jsx("option",{children:"Health Reason"}),e.jsx("option",{children:"Pursue Education"}),e.jsx("option",{children:"Family Care"}),e.jsx("option",{children:"Higher Salary"}),e.jsx("option",{children:"Higher Position"}),e.jsx("option",{children:"Better Job Scope"}),e.jsx("option",{children:"Better Environment"})]})]}),o.reason==="Dismissal"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full px-3",id:"dismissalReason",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"dismissalReasonSelect",children:"Reason for Dismissal:"}),e.jsxs("select",{name:"dismissalReasonSelect",id:"dismissalReasonSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",onChange:t=>i({...o,dismissalReasonSelect:t.target.value}),children:[e.jsx("option",{value:""}),e.jsx("option",{children:"Policy Violations"}),e.jsx("option",{children:"Performance"}),e.jsx("option",{children:"Others"})]})]}),e.jsxs("div",{className:"w-full px-3",id:"TerminationReport",children:[e.jsx("label",{className:"block uppercase tracking-wide text-xs font-bold mb-1 mt-2",htmlFor:"TerminationReportSelect",children:"Upload Termination Report:"}),e.jsx("input",{type:"file",name:"TerminationReportSelect[]",id:"TerminationReportSelect",className:"appearance-none block w-full border border-gray-400 rounded py-3 px-4 mb-3 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",accept:".jpg, .jpeg, .png, .pdf",multiple:!0})]})]})]})})]})]})}const $=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as A,$ as a,M as g};
